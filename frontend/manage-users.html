<!DOCTYPE html>
<html lang="en" class="bg-gray-100">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Dr.Net Admin Portal - Manage Users</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/styles.css" />

    <style>
      /* Professional CTIO Styling */
      .ctio-professional {
        background: #1e293b;
      }

      /* Sidebar styling */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 280px;
        z-index: 50;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
      }

      @media (min-width: 1024px) {
        .sidebar {
          transform: translateX(0);
        }
        .main-content {
          margin-left: 280px;
        }
      }

      /* Mobile toggle */
      .mobile-toggle {
        display: block;
      }

      @media (min-width: 1024px) {
        .mobile-toggle {
          display: none;
        }
      }

      /* Hover effects */
      .nav-item:hover {
        transform: translateX(8px);
        background: rgba(255, 255, 255, 0.15);
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <!-- Mobile backdrop -->
    <div
      id="sidebarBackdrop"
      class="fixed inset-0 bg-black bg-opacity-60 z-40 lg:hidden hidden transition-opacity duration-300"
    ></div>

    <!-- Modern Sidebar -->
    <aside
      id="sidebar"
      class="sidebar ctio-professional shadow-2xl flex flex-col text-white"
    >
      <!-- Sidebar Header -->
      <div class="p-6 border-b border-white/20">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <div
              class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-lg"
            >
              <i class="fas fa-network-wired text-xl text-white"></i>
            </div>
            <div>
              <h2 class="text-xl font-bold">DR.NET CTIO</h2>
              <p class="text-white/80 text-sm">Julius Ojwang - CTO</p>
            </div>
          </div>
          <button
            id="closeSidebar"
            class="mobile-toggle text-white/80 hover:text-white p-2 rounded-lg hover:bg-white/10 transition-all duration-200"
          >
            <i class="fas fa-times text-lg"></i>
          </button>
        </div>
      </div>
      <nav class="p-4 space-y-2 flex-1 overflow-y-auto">
        <a
          href="dashboard.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-chart-pie text-lg"></i>
          </div>
          <span class="font-medium">Dashboard</span>
        </a>
        <a
          href="register-user.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-user-plus text-lg"></i>
          </div>
          <span class="font-medium">Register User</span>
        </a>
        <a
          href="manage-users.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl bg-white/20 text-white transition-all duration-300"
        >
          <div
            class="w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center mr-4 transition-all duration-300"
          >
            <i class="fas fa-users text-lg"></i>
          </div>
          <span class="font-medium">Manage Users</span>
        </a>
        <a
          href="deleted-users.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-trash text-lg"></i>
          </div>
          <span class="font-medium">Deleted Users</span>
        </a>
        <a
          href="service-assignments.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-tools text-lg"></i>
          </div>
          <span class="font-medium">Service Assignments</span>
        </a>
        <a
          href="support-tickets.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-ticket-alt text-lg"></i>
          </div>
          <span class="font-medium">Support Tickets</span>
        </a>
        <a
          href="renewals.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-sync-alt text-lg"></i>
          </div>
          <span class="font-medium">Renewals</span>
        </a>
        <a
          href="invoice-generator.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-file-invoice-dollar text-lg"></i>
          </div>
          <span class="font-medium">Finance and Reports</span>
        </a>
        <a
          href="website-bookings.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-globe text-lg"></i>
          </div>
          <span class="font-medium">Website Bookings</span>
        </a>
        <a
          href="team-communication.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-comments text-lg"></i>
          </div>
          <span class="font-medium">Team Communication</span>
        </a>
        <a
          href="settings.html"
          class="nav-item group flex items-center px-4 py-3 rounded-xl transition-all duration-300 hover:bg-white/15 text-white/90 hover:text-white"
        >
          <div
            class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center mr-4 group-hover:bg-white/20 transition-all duration-300"
          >
            <i class="fas fa-cog text-lg"></i>
          </div>
          <span class="font-medium">Settings</span>
        </a>
      </nav>

      <!-- User Profile Section -->
      <div class="p-4 border-t border-white/20">
        <div class="flex items-center space-x-3 mb-4">
          <div
            class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center"
          >
            <span class="text-white font-bold text-lg">JO</span>
          </div>
          <div>
            <p class="text-sm font-medium">Julius Ojwang</p>
            <p class="text-white/70 text-xs">Chief Technology Officer</p>
          </div>
        </div>
        <button
          onclick="logout()"
          class="w-full bg-red-600/80 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"
        >
          <i class="fas fa-sign-out-alt"></i>
          <span>Log Out</span>
        </button>
      </div>
    </aside>

    <!-- Mobile Menu Toggle -->
    <button
      id="toggleSidebar"
      class="mobile-toggle fixed top-6 left-6 z-50 bg-white/20 backdrop-blur-lg text-white p-3 rounded-xl shadow-lg hover:bg-white/30 transition-all duration-300"
    >
      <i class="fas fa-bars text-lg"></i>
    </button>

    <!-- Main Content -->
    <main
      class="main-content p-2 md:p-4 overflow-y-auto transition-all duration-300 ease-in-out"
    >
      <section id="manage-users" class="mt-6 space-y-8">
        <div class="flex justify-between items-center">
          <h3 class="text-2xl font-bold text-gray-800">Manage Users</h3>
          <button
            id="exportButton"
            onclick="exportToCSV()"
            class="bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl"
          >
            <i class="fas fa-download mr-2"></i> Export Clients to CSV
          </button>
        </div>

        <!-- Tab Navigation -->
        <div class="mb-8">
          <div class="flex space-x-1 bg-gray-200 p-1 rounded-lg w-fit">
            <button
              id="clientsTab"
              class="tab-button px-6 py-3 rounded-md font-medium transition-all duration-200 bg-white text-blue-600 shadow-sm active"
              onclick="switchUserTab('clients')"
            >
              <i class="fas fa-users mr-2"></i> Clients
            </button>
            <button
              id="staffTab"
              class="tab-button px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-600"
              onclick="switchUserTab('staff')"
            >
              <i class="fas fa-user-tie mr-2"></i> Staff
            </button>
            <button
              id="attendanceTab"
              class="tab-button px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-600"
              onclick="switchUserTab('attendance')"
            >
              <i class="fas fa-user-check mr-2"></i> Attendance
            </button>
          </div>
        </div>
        <!-- Clients Section -->
        <div
          id="clientsSection"
          class="bg-white p-8 rounded-xl shadow-lg border border-gray-200"
        >
          <!-- Search and Filter Controls for Clients -->
          <div class="mb-6 flex flex-col md:flex-row md:items-center gap-4">
            <div class="flex-1">
              <input
                id="clientSearchInput"
                type="text"
                placeholder="Search by name, phone, or location..."
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900"
              />
            </div>
            <div class="flex gap-4">
              <select
                id="subscriptionFilter"
                class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900"
              >
                <option value="all">All Subscriptions</option>
                <option value="paid">Paid</option>
                <option value="unpaid">Unpaid</option>
              </select>
              <select
                id="statusFilter"
                class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900"
              >
                <option value="all">All Statuses</option>
                <option value="active">Active</option>
                <option value="expired">Expired</option>
              </select>
            </div>
          </div>
          <div id="clientListContent" class="space-y-4"></div>
        </div>

        <!-- Staff Section -->
        <div
          id="staffSection"
          class="hidden bg-white p-8 rounded-xl shadow-lg border border-gray-200"
        >
          <!-- Search and Filter Controls for Staff -->
          <div class="mb-6 flex flex-col md:flex-row md:items-center gap-4">
            <div class="flex-1">
              <input
                id="staffSearchInput"
                type="text"
                placeholder="Search by name, employee ID, position, or department..."
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white text-gray-900"
              />
            </div>
            <div class="flex gap-4">
              <select
                id="departmentFilter"
                class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white text-gray-900"
              >
                <option value="all">All Departments</option>
                <option value="Technical">Technical</option>
                <option value="Customer Service">Customer Service</option>
                <option value="Sales">Sales</option>
                <option value="Operations">Operations</option>
                <option value="Administration">Administration</option>
                <option value="Finance">Finance</option>
                <option value="Marketing">Marketing</option>
              </select>
              <select
                id="staffStatusFilter"
                class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white text-gray-900"
              >
                <option value="all">All Staff</option>
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
              </select>
            </div>
          </div>
          <div id="staffListContent" class="space-y-4"></div>
        </div>

      </section>
      <!-- View User Modal -->
      <div
        id="viewUserModal"
        class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"
      >
        <div
          id="viewUserModalContent"
          class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"
        ></div>
      </div>
    </main>
    <script src="js/config.js"></script>
    <script src="js/common.js"></script>
    <script src="js/sidebar-responsive.js"></script>
    <script src="js/manage-users.js"></script>
  </body>
</html>
